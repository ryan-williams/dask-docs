








<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API &mdash; Dask 2.13.0+4.gf26bb993.dirty documentation</title>
  

  
  
  
  

  
  <link rel="stylesheet" href="_static/css/style.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/explore.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/nbsphinx.css" type="text/css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="_static/js/custom.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Working with Collections" href="delayed-collections.html" />
    <link rel="prev" title="Delayed" href="delayed.html" />
    <link rel="shortcut icon" href="_static/images/favicon.ico"/>
  
</head>

<body class="wy-body-for-nav">

  
    <nav id="explore-links">
        <a href="https://docs.dask.org/">
        <img class="caption" src="_static/images/dask-horizontal-white.svg"/>
        </a>

        <ul>
        <li>
            <a>Get Started</a>
            <ul>
            <li><a href="https://docs.dask.org/en/latest/install.html"> Install </a></li>
            <li><a href="https://examples.dask.org"> Examples </a></li>
            <li><a href="https://github.com/dask/dask-tutorial"> Tutorial </a></li>
            <li><a href="https://docs.dask.org/en/latest/why.html"> Why Dask? </a></li>
            <li><a href="https://stories.dask.org/en/latest"> Use Cases </a></li>
            <li><a href="https://www.youtube.com/watch?v=RA_2qdipVng&list=PLRtz5iA93T4PQvWuoMnIyEIz1fXiJ5Pri"> Talks </a></li>
            <li><a href="https://mybinder.org/v2/gh/dask/dask-examples/master?urlpath=lab"> Try Online </a></li>
            <li><a href="https://dask.org/slides"> Slides </a></li>
            </ul>
        </li>

        <li>
            <a href="">Algorithms</a>
            <ul>
            <li><a href="https://docs.dask.org/en/latest/array.html">Arrays</a></li>
            <li><a href="https://docs.dask.org/en/latest/dataframe.html">Dataframes</a></li>
            <li><a href="https://docs.dask.org/en/latest/bag.html">Bags</a></li>
            <li><a href="https://docs.dask.org/en/latest/delayed.html">Delayed (custom)</a></li>
            <li><a href="https://docs.dask.org/en/latest/futures.html">Futures (real-time)</a></li>
            <li><a href="http://ml.dask.org">Machine Learning</a></li>
            <li><a href="https://xarray.pydata.org/en/latest/">XArray</a></li>
            </ul>
        </li>

        <li>
            <a href="https://docs.dask.org/en/latest/setup.html">Setup</a>
            <ul>
            <li><a href="https://docs.dask.org/en/latest/setup/single-machine.html"> Local </a></li>
            <li><a href="https://docs.dask.org/en/latest/setup/cloud.html"> Cloud </a></li>
            <li><a href="https://docs.dask.org/en/latest/setup/hpc.html"> HPC </a></li>
            <li><a href="https://kubernetes.dask.org/en/latest/"> Kubernetes </a></li>
            <li><a href="https://yarn.dask.org/en/latest/"> Hadoop / Yarn </a></li>
            </ul>
        </li>

        <li>
            <a>Community</a>
            <ul>
            <li><a href="http://docs.dask.org/en/latest/support.html">Ask for Help</a></li>
            <li><a href="https://github.com/dask">Github</a></li>
            <li><a href="https://stackoverflow.com/questions/tagged/dask">Stack Overflow</a></li>
            <li><a href="https://twitter.com/dask_dev">Twitter</a></li>
            <li><a href="https://blog.dask.org/"> Developer Blog </a></li>
            </ul>
        </li>
        </ul>

    </nav>
  
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Dask
          

          
          </a>

          
            
            
              <div class="version">
                2.13.0+4.gf26bb993.dirty
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Dask</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference external" href="https://stories.dask.org">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="why.html">Why Dask?</a></li>
<li class="toctree-l1"><a class="reference internal" href="institutional-faq.html">Institutional FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">User Interface</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="user-interfaces.html">User Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="array.html">Array</a></li>
<li class="toctree-l1"><a class="reference internal" href="bag.html">Bag</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframe.html">DataFrame</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="delayed.html">Delayed</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="delayed-collections.html">Working with Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="delayed-best-practices.html">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="delayed.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="delayed.html#decorator">Decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="delayed.html#real-time">Real time</a></li>
<li class="toctree-l2"><a class="reference internal" href="delayed.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="futures.html">Futures</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ml.dask.org">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="best-practices.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
<p class="caption"><span class="caption-text">Scheduling</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling</a></li>
<li class="toctree-l1"><a class="reference external" href="https://distributed.dask.org/">Distributed Scheduling</a></li>
</ul>
<p class="caption"><span class="caption-text">Diagnostics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="understanding-performance.html">Understanding Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphviz.html">Visualize task graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics-local.html">Diagnostics (local)</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics-distributed.html">Diagnostics (distributed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
</ul>
<p class="caption"><span class="caption-text">Help &amp; reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="develop.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="educational-resources.html">Educational Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="presentations.html">Presentations On Dask</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Dask Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="spark.html">Comparison to Spark</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">Opportunistic Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphs.html">Task Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote-data-services.html">Remote Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cite.html">Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="funding.html">Funding</a></li>
<li class="toctree-l1"><a class="reference internal" href="logos.html">Images and Logos</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Dask</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="delayed.html">Delayed</a> &raquo;</li>
        
      <li>API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/delayed-api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">dask.delayed</span></code> interface consists of one function, <code class="docutils literal notranslate"><span class="pre">delayed</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">delayed</span></code> wraps functions</p>
<blockquote>
<div><p>Wraps functions. Can be used as a decorator, or around function calls
directly (i.e. <code class="docutils literal notranslate"><span class="pre">delayed(foo)(a,</span> <span class="pre">b,</span> <span class="pre">c)</span></code>). Outputs from functions wrapped in
<code class="docutils literal notranslate"><span class="pre">delayed</span></code> are proxy objects of type <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> that contain a graph of
all operations done to get to this result.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">delayed</span></code> wraps objects</p>
<blockquote>
<div><p>Wraps objects. Used to create <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> proxies directly.</p>
</div></blockquote>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Delayed</span></code> objects can be thought of as representing a key in the dask task
graph. A <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> supports <em>most</em> python operations, each of which creates
another <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> representing the result:</p>
<ul class="simple">
<li><p>Most operators (<code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, and so on)</p></li>
<li><p>Item access and slicing (<code class="docutils literal notranslate"><span class="pre">a[0]</span></code>)</p></li>
<li><p>Attribute access (<code class="docutils literal notranslate"><span class="pre">a.size</span></code>)</p></li>
<li><p>Method calls (<code class="docutils literal notranslate"><span class="pre">a.index(0)</span></code>)</p></li>
</ul>
<p>Operations that aren’t supported include:</p>
<ul class="simple">
<li><p>Mutating operators (<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">1</span></code>)</p></li>
<li><p>Mutating magics such as <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code>/<code class="docutils literal notranslate"><span class="pre">__setattr__</span></code> (<code class="docutils literal notranslate"><span class="pre">a[0]</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">a.foo</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p></li>
<li><p>Iteration. (<code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">a:</span> <span class="pre">...</span></code>)</p></li>
<li><p>Use as a predicate (<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">a:</span> <span class="pre">...</span></code>)</p></li>
</ul>
<p>The last two points in particular mean that <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> objects cannot be used for
control flow, meaning that no <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> can appear in a loop or if statement.
In other words you can’t iterate over a <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> object, or use it as part of
a condition in an if statement, but <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> object can be used in a body of a loop
or if statement (i.e. the example above is fine, but if <code class="docutils literal notranslate"><span class="pre">data</span></code> was a <code class="docutils literal notranslate"><span class="pre">Delayed</span></code>
object it wouldn’t be).
Even with this limitation, many workflows can easily be parallelized.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dask.delayed.delayed" title="dask.delayed.delayed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">delayed</span></code></a></p></td>
<td><p>Wraps a function or object to produce a <code class="docutils literal notranslate"><span class="pre">Delayed</span></code>.</p></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="dask.delayed.delayed">
<code class="sig-prename descclassname">dask.delayed.</code><code class="sig-name descname">delayed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dask.delayed.delayed" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a function or object to produce a <code class="docutils literal notranslate"><span class="pre">Delayed</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Delayed</span></code> objects act as proxies for the object they wrap, but all
operations on them are done lazily by building up a dask graph internally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>obj</strong><span class="classifier">object</span></dt><dd><p>The function or object to wrap</p>
</dd>
<dt><strong>name</strong><span class="classifier">string or hashable, optional</span></dt><dd><p>The key to use in the underlying graph for the wrapped object. Defaults
to hashing content. Note that this only affects the name of the object
wrapped by this call to delayed, and <em>not</em> the output of delayed
function calls - for that use <code class="docutils literal notranslate"><span class="pre">dask_key_name=</span></code> as described below.</p>
</dd>
<dt><strong>pure</strong><span class="classifier">bool, optional</span></dt><dd><p>Indicates whether calling the resulting <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> object is a pure
operation. If True, arguments to the call are hashed to produce
deterministic keys. If not provided, the default is to check the global
<code class="docutils literal notranslate"><span class="pre">delayed_pure</span></code> setting, and fallback to <code class="docutils literal notranslate"><span class="pre">False</span></code> if unset.</p>
</dd>
<dt><strong>nout</strong><span class="classifier">int, optional</span></dt><dd><p>The number of outputs returned from calling the resulting <code class="docutils literal notranslate"><span class="pre">Delayed</span></code>
object. If provided, the <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> output of the call can be iterated
into <code class="docutils literal notranslate"><span class="pre">nout</span></code> objects, allowing for unpacking of results. By default
iteration over <code class="docutils literal notranslate"><span class="pre">Delayed</span></code> objects will error. Note, that <code class="docutils literal notranslate"><span class="pre">nout=1</span></code>
expects <code class="docutils literal notranslate"><span class="pre">obj</span></code>, to return a tuple of length 1, and consequently for
<code class="docutils literal notranslate"><span class="pre">nout=0</span></code>, <code class="docutils literal notranslate"><span class="pre">obj</span></code> should return an empty tuple.</p>
</dd>
<dt><strong>traverse</strong><span class="classifier">bool, optional</span></dt><dd><p>By default dask traverses builtin python collections looking for dask
objects passed to <code class="docutils literal notranslate"><span class="pre">delayed</span></code>. For large collections this can be
expensive. If <code class="docutils literal notranslate"><span class="pre">obj</span></code> doesn’t contain any dask objects, set
<code class="docutils literal notranslate"><span class="pre">traverse=False</span></code> to avoid doing this traversal.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Apply to functions to delay execution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">inc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inc</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">11</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">inc</span><span class="p">,</span> <span class="n">pure</span><span class="o">=</span><span class="kc">True</span><span class="p">)(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">Delayed</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="go">11</span>
</pre></div>
</div>
<p>Can be used as a decorator:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@delayed</span><span class="p">(</span><span class="n">pure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="go">3</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">delayed</span></code> also accepts an optional keyword <code class="docutils literal notranslate"><span class="pre">pure</span></code>. If False, then
subsequent calls will always produce a different <code class="docutils literal notranslate"><span class="pre">Delayed</span></code>. This is
useful for non-pure functions (such as <code class="docutils literal notranslate"><span class="pre">time</span></code> or <code class="docutils literal notranslate"><span class="pre">random</span></code>).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out1</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">random</span><span class="p">,</span> <span class="n">pure</span><span class="o">=</span><span class="kc">False</span><span class="p">)()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out2</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">random</span><span class="p">,</span> <span class="n">pure</span><span class="o">=</span><span class="kc">False</span><span class="p">)()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out1</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">out2</span><span class="o">.</span><span class="n">key</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If you know a function is pure (output only depends on the input, with no
global state), then you can set <code class="docutils literal notranslate"><span class="pre">pure=True</span></code>. This will attempt to apply a
consistent name to the output, but will fallback on the same behavior of
<code class="docutils literal notranslate"><span class="pre">pure=False</span></code> if this fails.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@delayed</span><span class="p">(</span><span class="n">pure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out1</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out2</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out1</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">out2</span><span class="o">.</span><span class="n">key</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Instead of setting <code class="docutils literal notranslate"><span class="pre">pure</span></code> as a property of the callable, you can also set
it contextually using the <code class="docutils literal notranslate"><span class="pre">delayed_pure</span></code> setting. Note that this
influences the <em>call</em> and not the <em>creation</em> of the callable:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dask</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@delayed</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">mul</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">dask</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">delayed_pure</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">mul</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">mul</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">dask</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">delayed_pure</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">mul</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">mul</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>The key name of the result of calling a delayed object is determined by
hashing the arguments by default. To explicitly set the name, you can use
the <code class="docutils literal notranslate"><span class="pre">dask_key_name</span></code> keyword when calling the function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>    
<span class="go">Delayed(&#39;add-3dce7c56edd1ac2614add714086e950f&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dask_key_name</span><span class="o">=</span><span class="s1">&#39;three&#39;</span><span class="p">)</span>
<span class="go">Delayed(&#39;three&#39;)</span>
</pre></div>
</div>
<p>Note that objects with the same key name are assumed to have the same
result. If you set the names explicitly you should make sure your key names
are different for different results.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dask_key_name</span><span class="o">=</span><span class="s1">&#39;three&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dask_key_name</span><span class="o">=</span><span class="s1">&#39;three&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dask_key_name</span><span class="o">=</span><span class="s1">&#39;four&#39;</span><span class="p">)</span>   
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">delayed</span></code> can also be applied to objects to make operations on them lazy:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Delayed</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
<p>The key name of a delayed object is hashed by default if <code class="docutils literal notranslate"><span class="pre">pure=True</span></code> or
is generated randomly if <code class="docutils literal notranslate"><span class="pre">pure=False</span></code> (default).  To explicitly set the
name, you can use the <code class="docutils literal notranslate"><span class="pre">name</span></code> keyword:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mylist&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">Delayed(&#39;mylist&#39;)</span>
</pre></div>
</div>
<p>Delayed results act as a proxy to the underlying object. Many operators
are supported:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="go">[1, 2, 3, 1, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Method and attribute access also works:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Note that if a method doesn’t exist, no error will be thrown until runtime:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">not_a_real_method</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>  
<span class="go">AttributeError(&quot;&#39;list&#39; object has no attribute &#39;not_a_real_method&#39;&quot;)</span>
</pre></div>
</div>
<p>“Magic” methods (e.g. operators and attribute access) are assumed to be
pure, meaning that subsequent calls must return the same results. This
behavior is not overrideable through the <code class="docutils literal notranslate"><span class="pre">delayed</span></code> call, but can be
modified using other ways as described below.</p>
<p>To invoke an impure attribute or operator, you’d need to use it in a
delayed function with <code class="docutils literal notranslate"><span class="pre">pure=False</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Incrementer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">... </span>    <span class="nd">@property</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">Incrementer</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">n</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">x</span><span class="o">.</span><span class="n">n</span><span class="o">.</span><span class="n">key</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_n</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">pure</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_n</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">get_n</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">key</span>
<span class="go">False</span>
</pre></div>
</div>
<p>In contrast, methods are assumed to be impure by default, meaning that
subsequent calls may return different results. To assume purity, set
<cite>pure=True</cite>. This allows sharing of any intermediate values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">key</span>
<span class="go">True</span>
</pre></div>
</div>
<p>As with function calls, method calls also respect the global
<code class="docutils literal notranslate"><span class="pre">delayed_pure</span></code> setting and support the <code class="docutils literal notranslate"><span class="pre">dask_key_name</span></code> keyword:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dask_key_name</span><span class="o">=</span><span class="s2">&quot;count_2&quot;</span><span class="p">)</span>
<span class="go">Delayed(&#39;count_2&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">dask</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">delayed_pure</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="delayed-collections.html" class="btn btn-neutral float-right" title="Working with Collections" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="delayed.html" class="btn btn-neutral float-left" title="Delayed" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2018, Anaconda, Inc. and contributors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>